version: '3.2'

services:
  space:
    build:
      context: advancedPhpObject/docker
      dockerfile: Dockerfile
    environment:
      - VIRTUAL_HOST=space-ship.app.docker
      - LOGSTREAM_PATH=/tmp/stdoutfifo
      - PGSQL_SYMFONY_REACT_HOST=symfony-react_pgsql
    volumes:
      - ./advancedPhpObject/start:/srv/app

  symfony-begin:
    build:
      context: symfon4Beginner/docker
      dockerfile: Dockerfile
    environment:
      - VIRTUAL_HOST=symfony-learning-beginner.app.docker
      - LOGSTREAM_PATH=/tmp/stdoutfifo
    volumes:
      - ./symfon4Beginner/start:/srv/app

  #symfony-react:
    #build:
      #context: symfonyReact/docker/front
      #dockerfile: Dockerfile
    #environment:
      #- VIRTUAL_HOST=symfony-learning-beginner.app.docker
      #- PGSQL_SYMFONY_REACT_HOST=symfony-react_pgsql
      #- LOGSTREAM_PATH=/tmp/stdoutfifo
    #volumes:
     # - ./symfonyReact/start:/srv/app

  symfony-react_pgsql:
    build:
      context: symfonyReact/docker/pgsql
      dockerfile: Dockerfile
    environment:
      - POSTGRES_DB=lift_database
      - POSTGRES_USER=lift_user
      - POSTGRES_PASSWORD=winners
      - POSTGRES_RO_USER=lift_user_ro
      - POSTGRES_RO_PASSWORD=winners
      - POSTGRES_EXTRA_DATABASE=delay
      - POSTGRES_EXTRA_USER=delay
      - POSTGRES_EXTRA_PASSWORD=delay
